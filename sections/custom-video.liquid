<div class="page-width" {% if section.settings.fullwidth %} style="max-width: 100%!important; margin: 0; padding: 0;" {% endif %}>
    <div class="video-section">
      <h2 style="text-align: center;">{{ section.settings.heading }}</h2>
    </div>
  
    {% if section.settings.self_hosted_video %}
      <div class="video-container" {% if section.settings.fullwidth %} style="width: 100%;" {% endif %}>
        {{
          section.settings.self_hosted_video
          | video_tag:
            controls: section.settings.controller,
            autoplay: section.settings.autoplay,
            loop: true,
            width: '100%'
        }}
      </div> 
    {% endif %}
  </div>
  
  {% if section.settings.fullwidth %}
    <style>
      .video-container {
        position: relative;
        width: 100%;
        padding-bottom: 56.25%; /* Aspect ratio 16:9*/
        height: 0;
        overflow: hidden;
      }
  
      .video-container video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
    </style>
  {% endif %}
  
  {% schema %}
  {
    "name": "Video",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Video section heading",
        "default": "Video Autoplay"
      },
      {
        "type": "checkbox",
        "id": "fullwidth",
        "label": "Make Full Width"
      },
      {
        "type": "checkbox",
        "id": "autoplay",
        "label": "Autoplay video",
        "default": false 
      },
      {
        "type": "checkbox",
        "id": "controller",
        "label": "Enable Controls",
        "default": false
      },
      {
        "type": "video",
        "id": "self_hosted_video", 
        "label": "Select Video"
      }
    ],
    "presets": [
      {
        "name": "Video"
      }
    ]
  }
  {% endschema %}